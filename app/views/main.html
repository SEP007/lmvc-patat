<?php
    use ui\UI;
    use Scandio\lmvc\modules\assetpipeline\view\Asset;
    use Scandio\lmvc\modules\security\handlers\database\models;
    use Scandio\lmvc\modules\security\Security;
    use Scandio\lmvc\modules\htmltag\Html;
    use Scandio\lmvc\modules\i18n\I18nWrapper;
    use Scandio\lmvc\modules\session\Session;
?>

<!doctype html>
<html>
<head>
    <title>Patat</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="<?= Asset::image(['favicon.ico']) ?>" type="image/x-icon">

    <?= UI::css(Asset::assets(['bootstrap-theme.css'], [])) ?>
    <?= UI::css(Asset::assets(['bootstrap-responsive.css'], [])) ?>

    <?= UI::css(Asset::assets(['style.css'], [])) ?>

    <!-- Library includes -->
    <?= UI::js(Asset::assets(['jquery.min.js'])) ?>

    <!-- Plugin includes -->
    <?= UI::js(Asset::assets(['bootstrap-collapse.js'])) ?>

    <!-- Run includes -->
    <?= UI::js(Asset::assets(['config.js', 'main.js'])) ?>
</head>
<body>
<div class="outer-wrapper row-fluid">
    <?=
        Html::header(['class' => 'row-fluid'],
            Html::div(['class' => 'pitcher'],
                Html::div(['class' => 'bar-left span2 visible-desktop visible-tablet'],
                    Html::img(['src' => Asset::image(['header-fries.png'])], null)
                )
                .
                Html::div(['class' => 'bar-middle span8'],
                    Html::h1([], 'Hungry?' . Html::span(['class' => 'brand'], 'Patat!'))
                )
                .
                Html::div(['class' => 'bar-right span2 visible-desktop visible-tablet'],
                    Html::img(['src' => Asset::image(['header-ketchup.png'])], null)
                )
            )
            .
            Html::div(['class' => 'languages'],
            	Html::form(['method' => 'post'], 
            	 	Html::ul(null,
            	 		'Choose Language' . 
      					Html::li(null, [
      						Html::input(['type' => 'image', 'value' => 'English', 
      							'alt' => 'English', 'name' => 'english', 
      							'src' => Asset::image(['flags/en_us.png'])], null),
      						Html::input(['type' => 'image', 'value' => 'Svenska', 
      							'alt' => 'Svenska', 'name' => 'svenska', 
      							'src' => Asset::image(['flags/sv.png'])], null),
      						Html::input(['type' => 'image', 'value' => 'German', 
      							'alt' => 'German', 'name' => 'german', 
      							'src' => Asset::image(['flags/de.png'])], null),
      						Html::input(['type' => 'image', 'value' => 'Russian', 
      							'alt' => 'Russian', 'name' => 'russian', 
      							'src' => Asset::image(['flags/ru.png'])], null),
      						Html::input(['type' => 'image', 'value' => 'Bulgarian', 
      							'alt' => 'Bulgarian', 'name' => 'bulgarian', 
      							'src' => Asset::image(['flags/bl.png'])], null),
      						Html::input(['type' => 'image', 'value' => 'Greek', 
      							'alt' => 'Greek', 'name' => 'greek', 
      							'src' => Asset::image(['flags/el.png'])], null), 
      					]) 
      				) 
   				) 
            ) 
        );
    ?>
    
    <?php
    	var_dump($_POST);
    
    	if(isset($_POST['german_x'])) {
        	I18nWrapper::setLanguage('de');
        }
        else if(isset($_POST['svenska_x'])) {
        	I18nWrapper::setLanguage('sv');
        }
        else if(isset($_POST['russian_x'])) {
        	I18nWrapper::setLanguage('ru');
        }
        else if(isset($_POST['bulgarian_x'])) {
        	I18nWrapper::setLanguage('bl');
        }
		else if(isset($_POST['greek_x'])) {
			I18nWrapper::setLanguage('el');
		}	
		else if(isset($_POST['english_x'])) {
			I18nWrapper::setLanguage('en');
		}
		
    ?>
    
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <a class="brand" href="<?= $app->url('Application::index') ?>">Patat</a>

                <div class="nav-collapse collapse">
                    <nav>
                        <ul class="nav pull-left">
                            <li class=""><a href="<?= $app->url('Application::index') ?>"> <?= I18nWrapper::translate('home'); ?> </a></li>
                            <?php if(!Security::get()->isAuthenticated()): ?>
                                <li><a href="<?= $app->url('Registration::signup') ?>"> <?= I18nWrapper::translate('signUp'); ?> </a></li>
                            <?php endif; ?>
                        </ul>

                        <ul class="nav pull-right">
                            <?php if(Security::get()->isAuthenticated()): ?>
                                <li><a href="<?= $app->url('Registration::edit') ?>"> <?= I18nWrapper::translate('myRestaurant'); ?> </a></li>
                            <?php endif; ?>
                            <li><a href="<?= $app->url('Menu::index') ?>"> <?= I18nWrapper::translate('menu'); ?> </a></li>
                            <?php if(Security::get()->isAuthenticated()): ?>
                                <li><a href="<?= $app->url('Security::logout') ?>"> <?= I18nWrapper::translate('logout'); ?> </a></li>
                            <?php endif; ?>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <div class="content-outer-wrapper row-fluid">
        <div class="content-inner-wrapper">
            <?php include($app->view) ?>
        </div>
    </div>

    <footer class="row-fluid">

    </footer>
</div>
</body>
</html>